{% if site.owner.google.analytics %}
<!-- Asynchronous Google Analytics snippet -->
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-29336006-1', 'auto');
    ga('send', 'pageview');

</script>
{% endif %}
{% if page.comments %}
{% include _disqus_comments.html %}
{% endif %}

<script>
    document.addEventListener('DOMContentLoaded', function () {

        var $share = document.querySelector('.share-post-wrapper');
        if (navigator.share && $share && '{{ page.title }}') {
            var $shareButton = document.createElement('button');
            $shareButton.setAttribute('type', 'button');
            $shareButton.setAttribute('class', 'native-share');
            $shareButton.innerText = 'Share';
            $shareButton.addEventListener('click', function () {
                navigator.share({
                    title: '{{ page.title }}',
                    url: '{{ site.url }}{{ site.baseurl }}{{ page.url }}'
                });
            });

            $share.innerHTML = '';
            $share.appendChild($shareButton);
        }
    });
</script>

{% if page.hideChat == null %}
<!--<script>-->
<!--    function addAsyncScript(src) {-->
<!--        script = document.createElement("script");-->
<!--        script.setAttribute("type", "text/javascript");-->
<!--        script.setAttribute("src", src);-->
<!--        script.setAttribute('async', '');-->
<!--        return document.getElementsByTagName("head")[0].appendChild(script);-->
<!--    }-->

<!--    document.addEventListener('DOMContentLoaded', function () {-->
<!--        addAsyncScript('https://userlike-cdn-widgets.s3-eu-west-1.amazonaws.com/caa43f35de5f1881f244707a964917d2b649b4891fdd5f8596f29fa063df4499.js')-->
<!--    });-->

<!--</script>-->
{% endif %}

<!-- Twitter universal website tag code -->
<script>
    !function (e, t, n, s, u, a) {
        e.twq || (s = e.twq = function () {
            s.exe ? s.exe.apply(s, arguments) : s.queue.push(arguments);
        }, s.version = '1.1', s.queue = [], u = t.createElement(n), u.async = !0, u.src = '//static.ads-twitter.com/uwt.js',
            a = t.getElementsByTagName(n)[0], a.parentNode.insertBefore(u, a))
    }(window, document, 'script');
    // Insert Twitter Pixel ID and Standard Event data below
    twq('init', 'nvznl');
    twq('track', 'PageView');
</script>
<!-- End Twitter universal website tag code -->

<script src="{{ site.url }}/js/bright.js?{{site.time | date: '%s%N'}}" type="text/javascript" defer></script>

<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" async></script>
<script type="application/javascript" async>
    (function () {
        function initConsent() {
            window.cookieconsent.initialise({
                "palette": {
                    "popup": {
                        "background": "#f4f4f4",
                        "text": "#afa7ab"
                    },
                    "button": {
                        "background": "#f7931e",
                        "text": "#ffffff"
                    }
                },
                "content": {
                    "message": "We use cookies for analytics and to improve our site. We respect your privacy.",
                    "dismiss": "Accept",
                    "link": "Read more.",
                    "href": "https://brightinventions.pl/privacy-policy/"
                }
            });
        }

        const deferInitConsent = function () {
            if (window.cookieconsent) {
                initConsent()
            } else {
                setTimeout(deferInitConsent, 1000)
            }
        };

        deferInitConsent()
    }());
</script>
